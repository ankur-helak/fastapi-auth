<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Memory Match Challenge</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Flip card styles */
    .flip-card {
      perspective: 1000px;
    }
    .flip-card-inner {
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    .flipped .flip-card-inner {
      transform: rotateY(180deg);
    }
    .flip-card-front, .flip-card-back {
      backface-visibility: hidden;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }
    .flip-card-back {
      transform: rotateY(180deg);
    }
  </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen">
  <!-- Game Container -->
  <div class="w-full max-w-md mx-auto p-4">
    <!-- Difficulty Selection -->
    <div id="start-screen" class="text-center">
      <h1 class="text-3xl font-bold mb-4">Memory Match Challenge</h1>
      <p class="mb-4">Select Difficulty Level:</p>
      <div class="mb-4">
        <button class="difficulty-btn bg-blue-500 text-white px-4 py-2 m-2 rounded" data-level="easy">Easy</button>
        <button class="difficulty-btn bg-yellow-500 text-white px-4 py-2 m-2 rounded" data-level="medium">Medium</button>
        <button class="difficulty-btn bg-red-500 text-white px-4 py-2 m-2 rounded" data-level="hard">Hard</button>
      </div>
    </div>

    <!-- Game Stats -->
    <div id="game-stats" class="hidden mb-4 flex justify-between">
      <div>Time: <span id="timer">0</span>s</div>
      <div>Attempts: <span id="attempts">0</span></div>
      <button id="restart-btn" class="bg-gray-500 text-white px-2 py-1 rounded">Restart</button>
    </div>

    <!-- Game Grid -->
    <div id="game-grid" class="grid gap-2"></div>

    <!-- End Game Modal -->
    <div id="end-game-modal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center">
      <div class="bg-white p-6 rounded-lg text-center">
        <h2 class="text-2xl font-bold mb-4">Congratulations!</h2>
        <p class="mb-4">You completed the game in <span id="final-time"></span> seconds with <span id="final-attempts"></span> attempts.</p>
        <button id="play-again-btn" class="bg-green-500 text-white px-4 py-2 rounded">Play Again</button>
      </div>
    </div>
  </div>

  <!-- JavaScript Code -->
  <script>
    const startScreen = document.getElementById('start-screen');
    const gameStats = document.getElementById('game-stats');
    const gameGrid = document.getElementById('game-grid');
    const timerEl = document.getElementById('timer');
    const attemptsEl = document.getElementById('attempts');
    const restartBtn = document.getElementById('restart-btn');
    const endGameModal = document.getElementById('end-game-modal');
    const finalTimeEl = document.getElementById('final-time');
    const finalAttemptsEl = document.getElementById('final-attempts');
    const playAgainBtn = document.getElementById('play-again-btn');

    let difficulty;
    let cardSymbols = [];
    let firstCard, secondCard;
    let lockBoard = false;
    let matchesFound = 0;
    let totalPairs;
    let attempts = 0;
    let timer;
    let timeElapsed = 0;

    const symbols = ['ðŸŽ','ðŸŒ','ðŸ’','ðŸ‡','ðŸ‰','ðŸ“','ðŸ','ðŸ¥','ðŸ¥‘','ðŸ…','ðŸ†','ðŸ¥•'];

    document.querySelectorAll('.difficulty-btn').forEach(button => {
      button.addEventListener('click', () => {
        difficulty = button.dataset.level;
        startGame();
      });
    });

    restartBtn.addEventListener('click', () => {
      resetGame();
    });

    playAgainBtn.addEventListener('click', () => {
      endGameModal.classList.add('hidden');
      resetGame();
    });

    function startGame() {
      startScreen.classList.add('hidden');
      gameStats.classList.remove('hidden');
      resetGame();
    }

    function resetGame() {
      clearInterval(timer);
      timeElapsed = 0;
      timerEl.textContent = timeElapsed;
      attempts = 0;
      attemptsEl.textContent = attempts;
      matchesFound = 0;
      firstCard = null;
      secondCard = null;
      lockBoard = false;
      gameGrid.innerHTML = '';
      setupGame();
      startTimer();
    }

    function setupGame() {
      let gridCols;
      switch(difficulty) {
        case 'easy':
          totalPairs = 4;
          gridCols = 4;
          break;
        case 'medium':
          totalPairs = 8;
          gridCols = 4;
          break;
        case 'hard':
          totalPairs = 12;
          gridCols = 6;
          break;
      }
      gameGrid.className = `grid gap-2 grid-cols-${gridCols}`;
      cardSymbols = symbols.slice(0, totalPairs);
      const gameSymbols = [...cardSymbols, ...cardSymbols];
      gameSymbols.sort(() => 0.5 - Math.random());
      gameSymbols.forEach(symbol => {
        const card = createCard(symbol);
        gameGrid.appendChild(card);
      });
    }

    function createCard(symbol) {
      const card = document.createElement('div');
      card.className = 'flip-card relative cursor-pointer';
      card.innerHTML = `
        <div class="flip-card-inner">
          <div class="flip-card-front bg-blue-500 rounded h-16 flex items-center justify-center text-white text-2xl"></div>
          <div class="flip-card-back bg-white rounded h-16 flex items-center justify-center text-2xl">${symbol}</div>
        </div>
      `;
      card.addEventListener('click', flipCard);
      card.dataset.symbol = symbol;
      return card;
    }

    function flipCard() {
      if (lockBoard || this === firstCard) return;
      this.classList.add('flipped');

      if (!firstCard) {
        firstCard = this;
        return;
      }

      secondCard = this;
      attempts++;
      attemptsEl.textContent = attempts;
      checkForMatch();
    }

    function checkForMatch() {
      const isMatch = firstCard.dataset.symbol === secondCard.dataset.symbol;
      isMatch ? disableCards() : unflipCards();
    }

    function disableCards() {
      firstCard.removeEventListener('click', flipCard);
      secondCard.removeEventListener('click', flipCard);
      resetBoard();
      matchesFound++;
      if (matchesFound === totalPairs) {
        endGame();
      }
    }

    function unflipCards() {
      lockBoard = true;
      setTimeout(() => {
        firstCard.classList.remove('flipped');
        secondCard.classList.remove('flipped');
        resetBoard();
      }, 1000);
    }

    function resetBoard() {
      [firstCard, secondCard] = [null, null];
      lockBoard = false;
    }

    function startTimer() {
      timer = setInterval(() => {
        timeElapsed++;
        timerEl.textContent = timeElapsed;
      }, 1000);
    }

    function endGame() {
      clearInterval(timer);
      finalTimeEl.textContent = timeElapsed;
      finalAttemptsEl.textContent = attempts;
      endGameModal.classList.remove('hidden');
    }
  </script>
</body>
</html>
